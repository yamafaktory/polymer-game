<polymer-element name="game-sprite" attributes="animationLock binaryMap devices matrix position type">

  <template>

    <style>

      :host {
        margin: 0;
        padding: 0;
        min-width: 60px;
        min-height: 60px;
        background: rgba(104, 184, 104, 1);
      }

      :host(:hover) {
        cursor: hand;
      }

      img {
        width: 60px;
        height: 60px;
      }

      :host(.medium),
      img.medium {
        min-width: 75px;
        min-height: 75px;
      }

      :host(.large),
      img.large {
        min-width: 90px;
        min-height: 90px;
      }

      :host(.xlarge),
      img.xlarge {
        min-width: 105px;
        min-height: 105px;
      }

      :host(.xxlarge),
      img.xxlarge {
        min-width: 120px;
        min-height: 120px;
      }

    </style>

    <animate-pivot id="animate"></animate-pivot>
    
    <img src="./build/images/{{ type }}.svg" id="sprite" class="{{ { medium: devices.medium, large: devices.large, xlarge: devices.xlarge, xxlarge: devices.xxlarge } | tokenList }}" on-click="{{ locate }}">

  </template>

  <script>
    Polymer('game-sprite', {
      created : function () {
        this.coordinates = [];
      },
      locate : function () {
        var x = JSON.parse(this.matrix)[0];
        var y = JSON.parse(this.matrix)[1];
        if (this.animationLock === false && this.binaryMap[y][x] === 0) {
          //  Animate sprite
          var animation = this.$.animate.$.animation;
          animation.target = this.$.sprite;
          animation.play();
          //  Set sprite position from matrix
          //  and parse the original string as JSON
          this.position.to = JSON.parse(this.matrix);
        }
      }
    });
  </script>

</polymer-element>