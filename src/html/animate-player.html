<polymer-element name="animate-player" attributes="animationLock path devices">

  <template>

    <core-animation duration="{{ (path.length * 1000) / 2 }}" id="animation">

      <template repeat="{{ step, i in path }}">

        <core-animation-keyframe offset="{{ (1 / (path.length - 1)) * i }}">

          <template if="{{ devices.mobile }}">
            <core-animation-prop name="transform" value="translate({{ step[0] * 60 }}px, {{ step[1] * 60 }}px)">
            </core-animation-prop>
          </template>

          <template if="{{ devices.medium }}">
            <core-animation-prop name="transform" value="translate({{ step[0] * 75 }}px, {{ step[1] * 75 }}px)">
            </core-animation-prop>
          </template>

          <template if="{{ devices.large }}">
            <core-animation-prop name="transform" value="translate({{ step[0] * 90 }}px, {{ step[1] * 90 }}px)">
            </core-animation-prop>
          </template>

          <template if="{{ devices.xlarge }}">
            <core-animation-prop name="transform" value="translate({{ step[0] * 105 }}px, {{ step[1] * 105 }}px)">
            </core-animation-prop>
          </template>

          <template if="{{ devices.xxlarge }}">
            <core-animation-prop name="transform" value="translate({{ step[0] * 120 }}px, {{ step[1] * 120 }}px)">
            </core-animation-prop>
          </template>

        </core-animation-keyframe>

      </template>

    </core-animation>

  </template>

   <script>

      Polymer('animate-player', {
        ready : function () {
          this.addEventListener('polymer-animation-start', function(event) {
            this.animationLock = true;
          }.bind(this));
          this.addEventListener('polymer-animation-end', function(event) {
            this.animationLock = false;
          }.bind(this));
        },
        pathChanged : function () {
          if (this.animationLock === false) {
            this.async(this.play());
          }
        },
        play : function () {
          this.$.animation.play();
        }
      });

    </script>

</polymer-element>
