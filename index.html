<html>
  <head><title>Game</title><meta charset="utf8"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><meta name="keywords" content="Game, SVG"><meta name="description" content="A game"><meta name="author" content="Davy Duperron"><script src="bower_components/platform/platform.js"></script><script src="bower_components/PathFinding.js/lib/pathfinding-browser.min.js"></script><link href="build/css/style.css" rel="stylesheet"></head>
  <body unresolved=""><polymer-element name="polymer-body" extends="body" assetpath="bower_components/polymer/">

  <script>document.addEventListener("polymer-ready",function(){Polymer("polymer-body",Platform.mixin({created:function(){this.template=document.createElement("template");var body=wrap(document).body;var c$=body.childNodes.array();for(var i=0,c;c=c$[i];i++){if(c.localName!=="script"){this.template.content.appendChild(c)}}window.model=this},parseDeclaration:function(elementElement){this.lightFromTemplate(this.template)}},window.model))});</script>

</polymer-element><script src="bower_components/polymer/polymer.js"></script><polymer-element name="polymer-media-query" attributes="query queryMatches" assetpath="bower_components/polymer-media-query/">
  <template>
    <style>:host{display:none}</style>
  </template>
  <script>Polymer("polymer-media-query",{queryMatches:false,query:"",ready:function(){this._mqHandler=this.queryHandler.bind(this);this._mq=null},queryChanged:function(){if(this._mq){this._mq.removeListener(this._mqHandler)}var query=this.query;if(query[0]!=="("){query="("+this.query+")"}this._mq=window.matchMedia(query);this._mq.addListener(this._mqHandler);this.queryHandler(this._mq)},queryHandler:function(mq){this.queryMatches=mq.matches;this.asyncFire("polymer-mediachange",mq)}});</script>
</polymer-element><polymer-element name="polymer-flex-layout" attributes="vertical align justify isContainer" assetpath="bower_components/polymer-flex-layout/">
  <template>
    <style polymer-scope="controller">.flexbox,[flexbox],[h-flexbox],[v-flexbox]{display:-webkit-box!important;display:-ms-flexbox!important;display:-moz-flex!important;display:-webkit-flex!important;display:flex!important}.flexbox.row,[flexbox],[h-flexbox]{-webkit-box-orient:horizontal;-ms-flex-direction:row;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}.flexbox.column,[v-flexbox]{-webkit-box-orient:vertical;-ms-flex-direction:column;-moz-flex-direction:column;-webkit-flex-direction:column;flex-direction:column}.flex,::content>.flex,::content>[fit],::content>[flex],[fit],[flex]{-webkit-box-flex:1;-ms-flex:1;-moz-flex:1;-webkit-flex:1;flex:1}.flexbox.align-start{-webkit-box-align:start;-ms-flex-align:start;-moz-align-items:flex-start;-webkit-align-items:flex-start;align-items:flex-start}.flexbox.align-end{-webkit-box-align:end;-ms-flex-align:end;-moz-align-items:flex-end;-webkit-align-items:flex-end;align-items:flex-end}.flexbox.align-center{-webkit-box-align:center;-ms-flex-align:center;-moz-align-items:center;-webkit-align-items:center;align-items:center}.flexbox.justify-start{-webkit-box-pack:start;-ms-flex-pack:start;-moz-justify-content:flex-start;-webkit-justify-content:flex-start;justify-content:flex-start}.flexbox.justify-end{-webkit-box-pack:end;-ms-flex-pack:end;-moz-justify-content:flex-end;-webkit-justify-content:flex-end;justify-content:flex-end}.flexbox.justify-center{-webkit-box-pack:center;-ms-flex-pack:center;-moz-justify-content:center;-webkit-justify-content:center;justify-content:center}.flexbox.justify-between{-webkit-box-pack:justify;-ms-flex-pack:justify;-moz-justify-content:space-between;-webkit-justify-content:space-between;justify-content:space-between}:host(.flexbox:host,[flexbox]:host,[h-flexbox]:host,[v-flexbox]:host){display:-webkit-box!important;display:-ms-flexbox!important;display:-moz-flex!important;display:-webkit-flex!important;display:flex!important}:host(.flexbox.row:host,[flexbox]:host,[h-flexbox]:host){-webkit-box-orient:horizontal;-ms-flex-direction:row;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}:host(.flexbox.column:host,[v-flexbox]:host){-webkit-box-orient:vertical;-ms-flex-direction:column;-moz-flex-direction:column;-webkit-flex-direction:column;flex-direction:column}:host(.flexbox.align-start:host){-webkit-box-align:start;-ms-flex-align:start;-moz-align-items:flex-start;-webkit-align-items:flex-start;align-items:flex-start}:host(.flexbox.align-end:host){-webkit-box-align:end;-ms-flex-align:end;-moz-align-items:flex-end;-webkit-align-items:flex-end;align-items:flex-end}:host(.flexbox.align-center:host){-webkit-box-align:center;-ms-flex-align:center;-moz-align-items:center;-webkit-align-items:center;align-items:center}:host(.flexbox.justify-start:host){-webkit-box-pack:start;-ms-flex-pack:start;-moz-justify-content:flex-start;-webkit-justify-content:flex-start;justify-content:flex-start}:host(.flexbox.justify-end:host){-webkit-box-pack:end;-ms-flex-pack:end;-moz-justify-content:flex-end;-webkit-justify-content:flex-end;justify-content:flex-end}:host(.flexbox.justify-center:host){-webkit-box-pack:center;-ms-flex-pack:center;-moz-justify-content:center;-webkit-justify-content:center;justify-content:center}:host(.flexbox.justify-between:host){-webkit-box-pack:justify;-ms-flex-pack:justify;-moz-justify-content:space-between;-webkit-justify-content:space-between;justify-content:space-between}</style>
    <style>.flexbox,[flexbox],[h-flexbox],[v-flexbox]{display:-webkit-box!important;display:-ms-flexbox!important;display:-moz-flex!important;display:-webkit-flex!important;display:flex!important}.flexbox.row,[flexbox],[h-flexbox]{-webkit-box-orient:horizontal;-ms-flex-direction:row;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}.flexbox.column,[v-flexbox]{-webkit-box-orient:vertical;-ms-flex-direction:column;-moz-flex-direction:column;-webkit-flex-direction:column;flex-direction:column}.flex,::content>.flex,::content>[fit],::content>[flex],[fit],[flex]{-webkit-box-flex:1;-ms-flex:1;-moz-flex:1;-webkit-flex:1;flex:1}.flexbox.align-start{-webkit-box-align:start;-ms-flex-align:start;-moz-align-items:flex-start;-webkit-align-items:flex-start;align-items:flex-start}.flexbox.align-end{-webkit-box-align:end;-ms-flex-align:end;-moz-align-items:flex-end;-webkit-align-items:flex-end;align-items:flex-end}.flexbox.align-center{-webkit-box-align:center;-ms-flex-align:center;-moz-align-items:center;-webkit-align-items:center;align-items:center}.flexbox.justify-start{-webkit-box-pack:start;-ms-flex-pack:start;-moz-justify-content:flex-start;-webkit-justify-content:flex-start;justify-content:flex-start}.flexbox.justify-end{-webkit-box-pack:end;-ms-flex-pack:end;-moz-justify-content:flex-end;-webkit-justify-content:flex-end;justify-content:flex-end}.flexbox.justify-center{-webkit-box-pack:center;-ms-flex-pack:center;-moz-justify-content:center;-webkit-justify-content:center;justify-content:center}.flexbox.justify-between{-webkit-box-pack:justify;-ms-flex-pack:justify;-moz-justify-content:space-between;-webkit-justify-content:space-between;justify-content:space-between}:host(.flexbox:host,[flexbox]:host,[h-flexbox]:host,[v-flexbox]:host){display:-webkit-box!important;display:-ms-flexbox!important;display:-moz-flex!important;display:-webkit-flex!important;display:flex!important}:host(.flexbox.row:host,[flexbox]:host,[h-flexbox]:host){-webkit-box-orient:horizontal;-ms-flex-direction:row;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}:host(.flexbox.column:host,[v-flexbox]:host){-webkit-box-orient:vertical;-ms-flex-direction:column;-moz-flex-direction:column;-webkit-flex-direction:column;flex-direction:column}:host(.flexbox.align-start:host){-webkit-box-align:start;-ms-flex-align:start;-moz-align-items:flex-start;-webkit-align-items:flex-start;align-items:flex-start}:host(.flexbox.align-end:host){-webkit-box-align:end;-ms-flex-align:end;-moz-align-items:flex-end;-webkit-align-items:flex-end;align-items:flex-end}:host(.flexbox.align-center:host){-webkit-box-align:center;-ms-flex-align:center;-moz-align-items:center;-webkit-align-items:center;align-items:center}:host(.flexbox.justify-start:host){-webkit-box-pack:start;-ms-flex-pack:start;-moz-justify-content:flex-start;-webkit-justify-content:flex-start;justify-content:flex-start}:host(.flexbox.justify-end:host){-webkit-box-pack:end;-ms-flex-pack:end;-moz-justify-content:flex-end;-webkit-justify-content:flex-end;justify-content:flex-end}:host(.flexbox.justify-center:host){-webkit-box-pack:center;-ms-flex-pack:center;-moz-justify-content:center;-webkit-justify-content:center;justify-content:center}:host(.flexbox.justify-between:host){-webkit-box-pack:justify;-ms-flex-pack:justify;-moz-justify-content:space-between;-webkit-justify-content:space-between;justify-content:space-between}</style>
    <content></content>
  </template>
  <script>Polymer("polymer-flex-layout",{vertical:false,isContainer:false,layoutContainer:null,enteredView:function(){this.installControllerStyles();this.layoutContainer=this.isContainer?this:this.parentNode.host||this.parentNode;this.verticalChanged();this.alignChanged();this.justifyChanged()},leftView:function(){this.layoutContainer=null},layoutContainerChanged:function(old){if(old){old.classList.remove("flexbox")}this.style.display=this.layoutContainer===this?"":"none";if(this.layoutContainer){this.layoutContainer.classList.add("flexbox")}},switchContainerClass:function(prefix,old,name){if(this.layoutContainer&&name){this.layoutContainer.classList.switch(prefix+old,prefix+name)}},verticalChanged:function(){if(this.layoutContainer){this.layoutContainer.classList.toggle("column",this.vertical)}},alignChanged:function(old){this.switchContainerClass("align-",old,this.align)},justifyChanged:function(old){this.switchContainerClass("justify-",old,this.justify)}});</script>
</polymer-element><script src="bower_components/web-animations-js/web-animations.js"></script><polymer-element name="polymer-animation-keyframe" attributes="offset value easing" assetpath="bower_components/polymer-animation/">
	<script>Polymer("polymer-animation-keyframe",{get properties(){var props={};var children=this.querySelectorAll("polymer-animation-prop");Array.prototype.forEach.call(children,function(c){props[c.name]=c.value});if(this.offset!==null){props.offset=this.offset}return props}});</script>
</polymer-element><polymer-element name="polymer-animation-prop" attributes="name value" assetpath="bower_components/polymer-animation/">
  <script>Polymer("polymer-animation-prop");</script>
</polymer-element><polymer-element name="polymer-animation" attributes="target keyframes sample composite duration fill easing iterationStart iterationCount delay direction autoplay targetSelector" assetpath="bower_components/polymer-animation/">
  <script>(function(){function findTarget(inSelector,inNode){var p=inNode;var target;while(p&&!p.host&&p!==document){p=p.parentNode}if(p){target=p.querySelector(inSelector)}if(!target&&p&&p.host){target=findTarget(inSelector,p.host)}return target}function toNumber(value,allowInfinity){return allowInfinity&&value==="Infinity"?Number.POSITIVE_INFINITY:Number(value)}Polymer("polymer-animation",{target:null,targetSelector:"",keyframes:null,sample:null,composite:"replace",duration:"auto",fill:"auto",easing:"linear",iterationStart:0,iterationCount:1,delay:0,direction:"normal",autoplay:false,animation:false,observe:{target:"apply",keyframes:"apply",sample:"apply",composite:"apply",duration:"apply",fill:"apply",easing:"apply",iterationCount:"apply",delay:"apply",direction:"apply",autoplay:"apply"},ready:function(){this.apply()},play:function(){this.apply();if(this.animation&&!this.autoplay){this.bindAnimationEvents();this.player=document.timeline.play(this.animation);return this.player}},cancel:function(){if(this.player){this.player.source=null}},hasTarget:function(){return this.target!==null},apply:function(){this.animation=null;this.animation=this.makeAnimation();if(this.autoplay&&this.animation){this.play()}return this.animation},makeSingleAnimation:function(target){target.classList.add("polymer-animation-target");return new Animation(target,this.animationEffect,this.timingProps)},makeAnimation:function(){if(!this.target){return null}var animation;if(Array.isArray(this.target)){var array=[];this.target.forEach(function(t){array.push(this.makeSingleAnimation(t))}.bind(this));animation=new ParGroup(array)}else{animation=this.makeSingleAnimation(this.target)}return animation},animationChanged:function(){this.fire("polymer-animation-change",this)},targetSelectorChanged:function(){if(this.targetSelector){this.target=findTarget(this.targetSelector,this)}},targetChanged:function(old){if(old){old.classList.remove("polymer-animation-target")}},get timingProps(){var props={};var timing={fill:{},easing:{},delay:{isNumber:true},iterationCount:{isNumber:true,allowInfinity:true},direction:{},duration:{isNumber:true}};for(t in timing){if(this[t]!==null){var name=timing[t].property||t;props[name]=timing[t].isNumber&&this[t]!=="auto"?toNumber(this[t],timing[t].allowInfinity):this[t]}}return props},get animationEffect(){var props={};var frames=[];var effect;if(this.keyframes){frames=this.keyframes}else if(!this.sample){var children=this.querySelectorAll("polymer-animation-keyframe");if(children.length===0){children=this.shadowRoot.querySelectorAll("polymer-animation-keyframe")}Array.prototype.forEach.call(children,function(c){frames.push(c.properties)})}if(this.sample){effect={sample:this.sample}}else{effect=new KeyframeEffect(frames,this.composite)}return effect},bindAnimationEvents:function(){if(!this.animation.onstart){this.animation.onstart=this.animationStartHandler.bind(this)}if(!this.animation.onend){this.animation.onend=this.animationEndHandler.bind(this)}},animationStartHandler:function(){this.fire("polymer-animation-start")},animationEndHandler:function(){this.fire("polymer-animation-end")}})})();</script>
</polymer-element><polymer-element name="game-sprite" attributes="type devices crossable movable matrix position" assetpath="src/html/">

  <template>

    <style>:host{margin:0;padding:0;min-width:60px;min-height:60px;background:rgba(104,184,104,1)}img{width:60px;height:60px}:host(.medium),img.medium{min-width:75px;min-height:75px}:host(.large),img.large{min-width:90px;min-height:90px}:host(.xlarge),img.xlarge{min-width:105px;min-height:105px}:host(.xxlarge),img.xxlarge{min-width:120px;min-height:120px}</style>

    <animate-pivot id="animate"></animate-pivot>
    
    <img src="./build/images/{{ type }}.svg" id="sprite" class="{{ { medium: devices.medium, large: devices.large, xlarge: devices.xlarge, xxlarge: devices.xxlarge } | tokenList }}" on-tap="{{ locate }}">

  </template>

  <script>Polymer("game-sprite",{locate:function(){this.position.to=JSON.parse(this.matrix)}});</script>

</polymer-element><polymer-element name="game-player" attributes="devices position" assetpath="src/html/">

  <template>

    <style>:host{margin:0;padding:0;min-width:60px;min-height:60px;background:0 0;z-index:1;position:absolute;top:{{position[0]}img{width:60px;height:60px}:host(.medium),img.medium{min-width:75px;min-height:75px}:host(.large),img.large{min-width:90px;min-height:90px}:host(.xlarge),img.xlarge{min-width:105px;min-height:105px}:host(.xxlarge),img.xxlarge{min-width:120px;min-height:120px}</style>

    <img src="/build/images/player.svg" class="{{ { medium: devices.medium, large: devices.large, xlarge: devices.xlarge, xxlarge: devices.xxlarge } | tokenList }}">

  </template>

  <script>Polymer("game-player",{ready:function(){}});</script>

</polymer-element><polymer-element name="animate-pivot" noscript="" assetpath="src/html/">

  <template>

    <polymer-animation duration=".3" id="animation">

      <polymer-animation-keyframe offset="0">
        <polymer-animation-prop name="transform" value="skewY(0)">
        </polymer-animation-prop>
      </polymer-animation-keyframe>

      <polymer-animation-keyframe offset=".25">
        <polymer-animation-prop name="transform" value="skewY(-12deg)">
        </polymer-animation-prop>
      </polymer-animation-keyframe>

      <polymer-animation-keyframe offset=".50">
        <polymer-animation-prop name="transform" value="skewY(6deg)">
        </polymer-animation-prop>
      </polymer-animation-keyframe>

      <polymer-animation-keyframe offset=".75">
        <polymer-animation-prop name="transform" value="skewY(-3deg)">
        </polymer-animation-prop>
      </polymer-animation-keyframe>

      <polymer-animation-keyframe offset="1">
        <polymer-animation-prop name="transform" value="skewY(0deg)">
        </polymer-animation-prop>
      </polymer-animation-keyframe>

    </polymer-animation>

  </template>

</polymer-element><polymer-element name="animate-player" attributes="duration path" assetpath="src/html/">

  <template>

    <polymer-animation duration="{{ duration }}" id="animation">

      <template repeat="{{ step, i in path }}">

        <polymer-animation-keyframe offset="{{ (1 / path.length) * i }}">
          <polymer-animation-prop name="transform" value="translateX(100px)">
          </polymer-animation-prop>
        </polymer-animation-keyframe>

      </template>

    </polymer-animation>

  </template>

   <script>Polymer("animate-player",{durationChanged:function(){console.log(this.duration);console.log(1/this.path.length)}});</script>

  </polymer-element><polymer-element name="game-stage" assetpath="src/html/">

  <template>

    <style>:host{width:100%;background:rgba(0,0,0,1);z-index:0}</style>

    <polymer-media-query query="max-width: 40rem" querymatches="{{ devices.mobile }}"></polymer-media-query>

    <polymer-media-query query="(min-width: 40.063rem) and (max-width: 64rem)" querymatches="{{ devices.medium }}"></polymer-media-query>

    <polymer-media-query query="(min-width: 64.063rem) and (max-width: 90rem)" querymatches="{{ devices.large }}"></polymer-media-query>

    <polymer-media-query query="(min-width: 90.063rem) and (max-width: 120rem)" querymatches="{{ devices.xlarge }}"></polymer-media-query>

    <polymer-media-query query="min-width: 120.063rem" querymatches="{{ devices.xxlarge }}"></polymer-media-query>

    <animate-player id="animate" duration="{{ move.duration }}" path="{{ move.path }}"></animate-player>

    <game-player class="{{ { medium: devices.medium, large: devices.large, xlarge: devices.xlarge, xxlarge: devices.xxlarge } | tokenList }}" devices="{{ devices }}" position="{{ position }}" id="player"></game-player>

      <template repeat="{{ row, i in world }}">

        <polymer-flex-layout iscontainer="" align="start" justify="start">

          <template repeat="{{ sprite, j in row }}">

            <game-sprite type="{{ sprite }}" class="{{ { medium: devices.medium, large: devices.large, xlarge: devices.xlarge, xxlarge: devices.xxlarge } | tokenList }}" devices="{{ devices }}" matrix="[{{ i }}, {{ j }}]" position="{{ position }}"></game-sprite>

          </template>

        </polymer-flex-layout>

      </template>

  </template>

  <script>Polymer("game-stage",{position:{from:[0,0],to:[0,0]},devices:{},move:{},world:[[0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,0,0,1,0,0,0,0,0,2,0,0,0,0,0,0,0,0],[0,0,1,0,1,0,0,0,0,3,0,0,0,3,0,0,3,0,0,0],[0,0,0,0,0,0,2,0,3,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,3,0,3,1,1,0,0,0,3,3,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],crossableSprites:[0,3],isCrossable:function(type){return this.crossableSprites.indexOf(type)!==-1?true:false},toBinaryMatrix:function(world){var binaryWorld=[],toBinary=function(value){return this.isCrossable(value)?0:1}.bind(this);world.forEach(function(row){binaryWorld.push(row.map(toBinary))});return binaryWorld},ready:function(){var binaryWorld=this.toBinaryMatrix(this.world);this.grid=new PF.Grid(20,20,binaryWorld);this.finder=new PF.AStarFinder},movePlayer:function(){var animation=this.$.animate.$.animation;console.log(animation);animation.target=this.$.player;animation.play()},observe:{"position.to":"playerPositionHasChanged"},playerPositionHasChanged:function(){var gridBackup=this.grid.clone(),path=this.finder.findPath(this.position.from[0],this.position.from[1],this.position.to[0],this.position.to[1],this.grid);this.grid=gridBackup;this.move.path=path;this.move.duration=path.length*.5;this.movePlayer();this.position.from=this.position.to;console.log(path)}});</script>

</polymer-element><game-stage></game-stage></body>
</html>