<html>
  <head><title>Game</title><meta charset="utf8"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><meta name="keywords" content="Game, SVG"><meta name="description" content="A game"><meta name="author" content="Davy Duperron"><script src="bower_components/PathFinding.js/lib/pathfinding-browser.min.js"></script><script src="bower_components/platform/platform.js"></script><link href="build/css/style.css" rel="stylesheet"></head>
  <body unresolved=""><polymer-element name="polymer-body" extends="body" assetpath="bower_components/polymer/">
<script>document.addEventListener("polymer-ready",function(){Polymer("polymer-body",Platform.mixin({created:function(){this.template=document.createElement("template");var body=wrap(document).body;var c$=body.childNodes.array();for(var i=0,c;c=c$[i];i++){if(c.localName!=="script"){this.template.content.appendChild(c)}}window.model=this},parseDeclaration:function(elementElement){this.lightFromTemplate(this.template)}},window.model))});</script>
</polymer-element><script src="bower_components/polymer/polymer.js"></script><script src="bower_components/web-animations-js/web-animations.js"></script><polymer-element name="polymer-animation-keyframe" attributes="offset value easing" assetpath="bower_components/polymer-animation/">
	<script>Polymer("polymer-animation-keyframe",{publish:{offset:{value:"",reflect:true},value:{value:"",reflect:true},easing:{value:"",reflect:true}},get properties(){var props={};var children=this.querySelectorAll("polymer-animation-prop");Array.prototype.forEach.call(children,function(c){props[c.name]=c.value});if(this.offset!==null){props.offset=this.offset}return props}});</script>
</polymer-element><polymer-element name="polymer-animation-prop" attributes="name value" assetpath="bower_components/polymer-animation/">
  <script>Polymer("polymer-animation-prop",{publish:{name:{value:"",reflect:true},value:{value:"",reflect:true}}});</script>
</polymer-element><polymer-element name="polymer-animation" attributes="target keyframes sample composite duration fill easing iterationStart iterationCount delay direction autoplay targetSelector" assetpath="bower_components/polymer-animation/">
  <script>(function(){function findTarget(inSelector,inNode){var p=inNode;var target;while(p&&!p.host&&p!==document){p=p.parentNode}if(p){target=p.querySelector(inSelector)}if(!target&&p&&p.host){target=findTarget(inSelector,p.host)}return target}function toNumber(value,allowInfinity){return allowInfinity&&value==="Infinity"?Number.POSITIVE_INFINITY:Number(value)}Polymer("polymer-animation",{publish:{target:{value:null,reflect:true},targetSelector:{value:"",reflect:true},keyframes:{value:null,reflect:true},sample:{value:null,reflect:true},composite:{value:"replace",reflect:true},duration:{value:"auto",reflect:true},fill:{value:"auto",reflect:true},easing:{value:"linear",reflect:true},iterationStart:{value:0,reflect:true},iterationCount:{value:1,reflect:true},delay:{value:0,reflect:true},direction:{value:"normal",reflect:true},autoplay:{value:false,reflect:true}},animation:false,observe:{target:"apply",keyframes:"apply",sample:"apply",composite:"apply",duration:"apply",fill:"apply",easing:"apply",iterationCount:"apply",delay:"apply",direction:"apply",autoplay:"apply"},ready:function(){this.apply()},play:function(){this.apply();if(this.animation&&!this.autoplay){this.bindAnimationEvents();this.player=document.timeline.play(this.animation);return this.player}},cancel:function(){if(this.player){this.player.source=null}},hasTarget:function(){return this.target!==null},apply:function(){this.animation=null;this.animation=this.makeAnimation();if(this.autoplay&&this.animation){this.play()}return this.animation},makeSingleAnimation:function(target){target.classList.add("polymer-animation-target");return new Animation(target,this.animationEffect,this.timingProps)},makeAnimation:function(){if(!this.target){return null}var animation;if(Array.isArray(this.target)){var array=[];this.target.forEach(function(t){array.push(this.makeSingleAnimation(t))}.bind(this));animation=new ParGroup(array)}else{animation=this.makeSingleAnimation(this.target)}return animation},animationChanged:function(){this.fire("polymer-animation-change",this)},targetSelectorChanged:function(){if(this.targetSelector){this.target=findTarget(this.targetSelector,this)}},targetChanged:function(old){if(old){old.classList.remove("polymer-animation-target")}},get timingProps(){var props={};var timing={fill:{},easing:{},delay:{isNumber:true},iterationCount:{isNumber:true,allowInfinity:true},direction:{},duration:{isNumber:true}};for(t in timing){if(this[t]!==null){var name=timing[t].property||t;props[name]=timing[t].isNumber&&this[t]!=="auto"?toNumber(this[t],timing[t].allowInfinity):this[t]}}return props},get animationEffect(){var props={};var frames=[];var effect;if(this.keyframes){frames=this.keyframes}else if(!this.sample){var children=this.querySelectorAll("polymer-animation-keyframe");if(children.length===0){children=this.shadowRoot.querySelectorAll("polymer-animation-keyframe")}Array.prototype.forEach.call(children,function(c){frames.push(c.properties)})}if(this.sample){effect={sample:this.sample}}else{effect=new KeyframeEffect(frames,this.composite)}return effect},bindAnimationEvents:function(){if(!this.animation.onstart){this.animation.onstart=this.animationStartHandler.bind(this)}if(!this.animation.onend){this.animation.onend=this.animationEndHandler.bind(this)}},animationStartHandler:function(){this.fire("polymer-animation-start")},animationEndHandler:function(){this.fire("polymer-animation-end")}})})();</script>
</polymer-element><polymer-element name="core-layout" attributes="vertical justify align isContainer reverse" assetpath="bower_components/core-layout/">
  
  <template>
  
    <style no-shim="">.core-h,.core-v{display:-webkit-box!important;display:-ms-flexbox!important;display:-moz-flex!important;display:-webkit-flex!important;display:flex!important}.core-h{-webkit-box-orient:horizontal;-ms-flex-direction:row;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}.core-h.core-reverse{-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;-moz-flex-direction:row-reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.core-v{-webkit-box-orient:vertical;-ms-flex-direction:column;-moz-flex-direction:column;-webkit-flex-direction:column;flex-direction:column}.core-v.core-reverse{-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;-moz-flex-direction:column-reverse;-webkit-flex-direction:column-reverse;flex-direction:column-reverse}.core-relative{position:relative}.core-fit{position:absolute;top:0;left:0;height:100%;width:100%}body.core-fit{margin:0}.core-flex,[core-flex]{-webkit-box-flex:1;-ms-flex:1;-moz-flex:1;-webkit-flex:1;flex:1}.core-flex-auto,[core-flex-auto]{-webkit-box-flex:1;-ms-flex:1 1 auto;-moz-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto}.core-flex-none,[core-flex-none]{-webkit-box-flex:none;-ms-flex:none;-moz-flex:none;-webkit-flex:none;flex:none}.core-flex1,[core-flex=1]{-webkit-box-flex:1;-ms-flex:1;-moz-flex:1;-webkit-flex:1;flex:1}.core-flex2,[core-flex=2]{-webkit-box-flex:2;-ms-flex:2;-moz-flex:2;-webkit-flex:2;flex:2}.core-flex3,[core-flex=3]{-webkit-box-flex:3;-ms-flex:3;-moz-flex:3;-webkit-flex:3;flex:3}::content>.core-flex,::content>[core-flex]{-webkit-box-flex:1;-ms-flex:1;-moz-flex:1;-webkit-flex:1;flex:1}::content>.core-flex-auto,::content>[core-flex-auto]{-webkit-box-flex:1;-ms-flex:1 1 auto;-moz-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto}::content>.core-flex-none,::content>[core-flex-none]{-webkit-box-flex:none;-ms-flex:none;-moz-flex:none;-webkit-flex:none;flex:none}::content>.core-flex1,::content>[core-flex=1]{-webkit-box-flex:1;-ms-flex:1;-moz-flex:1;-webkit-flex:1;flex:1}::content>.core-flex2,::content>[core-flex=2]{-webkit-box-flex:2;-ms-flex:2;-moz-flex:2;-webkit-flex:2;flex:2}::content>.core-flex3,::content>[core-flex=3]{-webkit-box-flex:3;-ms-flex:3;-moz-flex:3;-webkit-flex:3;flex:3}.core-justify-start{-webkit-box-pack:start;-ms-flex-pack:start;-moz-justify-content:flex-start;-webkit-justify-content:flex-start;justify-content:flex-start}.core-justify-center{-webkit-box-pack:center;-ms-flex-pack:center;-moz-justify-content:center;-webkit-justify-content:center;justify-content:center}.core-justify-end{-webkit-box-pack:end;-ms-flex-pack:end;-moz-justify-content:flex-end;-webkit-justify-content:flex-end;justify-content:flex-end}.core-justify-between{-webkit-box-pack:justify;-ms-flex-pack:justify;-moz-justify-content:space-between;-webkit-justify-content:space-between;justify-content:space-between}.core-align-start{-webkit-box-align:start;-ms-flex-align:start;-moz-align-items:flex-start;-webkit-align-items:flex-start;align-items:flex-start}.core-align-center{-webkit-box-align:center;-ms-flex-align:center;-moz-align-items:center;-webkit-align-items:center;align-items:center}.core-align-end{-webkit-box-align:end;-ms-flex-align:end;-moz-align-items:flex-end;-webkit-align-items:flex-end;align-items:flex-end}</style>
    <style no-shim="">:host{display:-webkit-box!important;display:-ms-flexbox!important;display:-moz-flex!important;display:-webkit-flex!important;display:flex!important}:host(.core-h){-webkit-box-orient:horizontal;-ms-flex-direction:row;-moz-flex-direction:row;-webkit-flex-direction:row;flex-direction:row}:host(.core-v){-webkit-box-orient:vertical;-ms-flex-direction:column;-moz-flex-direction:column;-webkit-flex-direction:column;flex-direction:column}:host(.core-h.core-reverse){-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;-moz-flex-direction:row-reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse}:host(.core-v.core-reverse){-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;-moz-flex-direction:column-reverse;-webkit-flex-direction:column-reverse;flex-direction:column-reverse}:host(.core-justify-start){-webkit-box-pack:start;-ms-flex-pack:start;-moz-justify-content:flex-start;-webkit-justify-content:flex-start;justify-content:flex-start}:host(.core-justify-center){-webkit-box-pack:center;-ms-flex-pack:center;-moz-justify-content:center;-webkit-justify-content:center;justify-content:center}:host(.core-justify-end){-webkit-box-pack:end;-ms-flex-pack:end;-moz-justify-content:flex-end;-webkit-justify-content:flex-end;justify-content:flex-end}:host(.core-justify-between){-webkit-box-pack:justify;-ms-flex-pack:justify;-moz-justify-content:space-between;-webkit-justify-content:space-between;justify-content:space-between}:host(.core-align-start){-webkit-box-align:start;-ms-flex-align:start;-moz-align-items:flex-start;-webkit-align-items:flex-start;align-items:flex-start}:host(.core-align-center){-webkit-box-align:center;-ms-flex-align:center;-moz-align-items:center;-webkit-align-items:center;align-items:center}:host(.core-align-end){-webkit-box-align:end;-ms-flex-align:end;-moz-align-items:flex-end;-webkit-align-items:flex-end;align-items:flex-end}</style>
  
  </template>
  
  <script>(function(){Polymer("core-layout",{isContainer:false,vertical:false,justify:"",align:"",reverse:false,layoutPrefix:"core-",registerCallback:function(polymerElement){var template=polymerElement.querySelector("template");this.styles=template.content.querySelectorAll("style").array();this.styles.forEach(function(s){s.removeAttribute("no-shim")})},fetchTemplate:function(){return null},attached:function(){this.installScopeStyle(this.styles[0]);if(this.children.length){this.isContainer=true}var container=this.isContainer?this:this.parentNode;var forHost=container instanceof ShadowRoot;if(forHost){this.installScopeStyle(this.styles[1],"host");container=container.host||document.body}this.layoutContainer=container},detached:function(){this.layoutContainer=null},layoutContainerChanged:function(old){this.style.display=this.layoutContainer===this?null:"none";this.verticalChanged();this.alignChanged();this.justifyChanged()},setLayoutClass:function(prefix,old,newValue){if(this.layoutContainer){prefix=this.layoutPrefix+prefix;if(old){this.layoutContainer.classList.remove(prefix+old)}if(newValue){this.layoutContainer.classList.add(prefix+newValue)}}},verticalChanged:function(old){old=old?"column":"row";var vertical=this.vertical?"v":"h";this.setLayoutClass("",old,vertical)},alignChanged:function(old){this.setLayoutClass("align-",old,this.align)},justifyChanged:function(old){this.setLayoutClass("justify-",old,this.justify)},reverseChanged:function(old){old=old?"reverse":"";var newValue=this.reverse?"reverse":"";this.setLayoutClass("",old,newValue)}})})();</script>

</polymer-element><polymer-element name="core-media-query" attributes="query queryMatches" assetpath="bower_components/core-media-query/">
  <template>
    <style>:host{display:none}</style>
  </template>
  <script>Polymer("core-media-query",{queryMatches:false,query:"",ready:function(){this._mqHandler=this.queryHandler.bind(this);this._mq=null},queryChanged:function(){if(this._mq){this._mq.removeListener(this._mqHandler)}var query=this.query;if(query[0]!=="("){query="("+this.query+")"}this._mq=window.matchMedia(query);this._mq.addListener(this._mqHandler);this.queryHandler(this._mq)},queryHandler:function(mq){this.queryMatches=mq.matches;this.asyncFire("core-media-change",mq)}});</script>
</polymer-element><polymer-element name="game-sprite" attributes="animationLock binaryMap devices matrix movable position type" assetpath="src/html/">

  <template>

    <style>:host{margin:0;padding:0;min-width:60px;min-height:60px;background:rgba(104,184,104,1)}:host(:hover){cursor:hand}img{width:60px;height:60px}:host(.medium),img.medium{min-width:75px;min-height:75px}:host(.large),img.large{min-width:90px;min-height:90px}:host(.xlarge),img.xlarge{min-width:105px;min-height:105px}:host(.xxlarge),img.xxlarge{min-width:120px;min-height:120px}</style>

    <animate-pivot id="animate"></animate-pivot>
    
    <img src="./build/images/{{ type }}.svg" id="sprite" class="{{ { medium: devices.medium, large: devices.large, xlarge: devices.xlarge, xxlarge: devices.xxlarge } | tokenList }}" on-click="{{ locate }}">

  </template>

  <script>Polymer("game-sprite",{coordinates:[],locate:function(){var x=JSON.parse(this.matrix)[0];var y=JSON.parse(this.matrix)[1];if(this.animationLock===false&&this.binaryMap[y][x]===0){var animation=this.$.animate.$.animation;animation.target=this.$.sprite;animation.play();this.position.to=JSON.parse(this.matrix)}}});</script>

</polymer-element><polymer-element name="game-player" attributes="devices position" assetpath="src/html/">

  <template>

    <style>:host{margin:0;padding:0;min-width:60px;min-height:60px;background:0 0;z-index:1;position:absolute;top:0}img{width:60px;height:60px}:host(.medium),img.medium{min-width:75px;min-height:75px}:host(.large),img.large{min-width:90px;min-height:90px}:host(.xlarge),img.xlarge{min-width:105px;min-height:105px}:host(.xxlarge),img.xxlarge{min-width:120px;min-height:120px}</style>

    <img src="/build/images/player.svg" class="{{ { medium: devices.medium, large: devices.large, xlarge: devices.xlarge, xxlarge: devices.xxlarge } | tokenList }}">

  </template>

  <script>Polymer("game-player",{ready:function(){}});</script>

</polymer-element><polymer-element name="animate-pivot" noscript="" assetpath="src/html/">

  <template>

    <polymer-animation duration=".3" id="animation">

      <polymer-animation-keyframe offset="0">
        <polymer-animation-prop name="transform" value="skewY(0)">
        </polymer-animation-prop>
      </polymer-animation-keyframe>

      <polymer-animation-keyframe offset=".25">
        <polymer-animation-prop name="transform" value="skewY(-12deg)">
        </polymer-animation-prop>
      </polymer-animation-keyframe>

      <polymer-animation-keyframe offset=".50">
        <polymer-animation-prop name="transform" value="skewY(6deg)">
        </polymer-animation-prop>
      </polymer-animation-keyframe>

      <polymer-animation-keyframe offset=".75">
        <polymer-animation-prop name="transform" value="skewY(-3deg)">
        </polymer-animation-prop>
      </polymer-animation-keyframe>

      <polymer-animation-keyframe offset="1">
        <polymer-animation-prop name="transform" value="skewY(0deg)">
        </polymer-animation-prop>
      </polymer-animation-keyframe>

    </polymer-animation>

  </template>

</polymer-element><polymer-element name="animate-player" attributes="animationLock path devices" assetpath="src/html/">

  <template>

    <polymer-animation duration="{{ path.length / 4 }}" id="animation">

      <template repeat="{{ step, i in path }}">

        <polymer-animation-keyframe offset="{{ (1 / (path.length - 1)) * i }}">

          <template if="{{ devices.mobile }}">
            <polymer-animation-prop name="transform" value="translate({{ step[0] * 60 }}px, {{ step[1] * 60 }}px)">
            </polymer-animation-prop>
          </template>

          <template if="{{ devices.medium }}">
            <polymer-animation-prop name="transform" value="translate({{ step[0] * 75 }}px, {{ step[1] * 75 }}px)">
            </polymer-animation-prop>
          </template>

          <template if="{{ devices.large }}">
            <polymer-animation-prop name="transform" value="translate({{ step[0] * 90 }}px, {{ step[1] * 90 }}px)">
            </polymer-animation-prop>
          </template>

          <template if="{{ devices.xlarge }}">
            <polymer-animation-prop name="transform" value="translate({{ step[0] * 105 }}px, {{ step[1] * 105 }}px)">
            </polymer-animation-prop>
          </template>

          <template if="{{ devices.xxlarge }}">
            <polymer-animation-prop name="transform" value="translate({{ step[0] * 120 }}px, {{ step[1] * 120 }}px)">
            </polymer-animation-prop>
          </template>

        </polymer-animation-keyframe>

      </template>

    </polymer-animation>

  </template>

   <script>Polymer("animate-player",{ready:function(){this.addEventListener("polymer-animation-start",function(event){this.animationLock=true}.bind(this));this.addEventListener("polymer-animation-end",function(event){this.animationLock=false}.bind(this))},pathChanged:function(){if(this.animationLock===false){this.async(this.play)}},play:function(){this.$.animation.play()}});</script>

  </polymer-element><polymer-element name="game-stage" attributes="world binaryMap" assetpath="src/html/">

  <template>

    <style>:host{width:100%;background:rgba(0,0,0,1);z-index:0}</style>

    <core-media-query query="max-width: 40rem" querymatches="{{ devices.mobile }}"></core-media-query>

    <core-media-query query="(min-width: 40.063rem) and (max-width: 64rem)" querymatches="{{ devices.medium }}"></core-media-query>

    <core-media-query query="(min-width: 64.063rem) and (max-width: 90rem)" querymatches="{{ devices.large }}"></core-media-query>

    <core-media-query query="(min-width: 90.063rem) and (max-width: 120rem)" querymatches="{{ devices.xlarge }}"></core-media-query>

    <core-media-query query="min-width: 120.063rem" querymatches="{{ devices.xxlarge }}"></core-media-query>

    <animate-player id="animate" animationlock="{{ animationLock }}" devices="{{ devices }}" path="{{ path }}"></animate-player>

    <game-player class="{{ { medium: devices.medium, large: devices.large, xlarge: devices.xlarge, xxlarge: devices.xxlarge } | tokenList }}" devices="{{ devices }}" position="{{ position }}" id="player"></game-player>

      <template repeat="{{ row, i in world }}">

        <core-layout align="start" justify="start">

          <template repeat="{{ sprite, j in row }}">

            <game-sprite type="{{ sprite }}" class="{{ { medium: devices.medium, large: devices.large, xlarge: devices.xlarge, xxlarge: devices.xxlarge } | tokenList }}" animationlock="{{ animationLock }}" devices="{{ devices }}" matrix="[{{ j }}, {{ i }}]" position="{{ position }}" binarymap="{{ binaryMap }}"></game-sprite>

          </template>

        </core-layout>

      </template>

  </template>

  <script>Polymer("game-stage",{publish:{position:{value:{from:[0,0],to:[0,0]},reflect:true}},animationLock:false,binaryMap:[],devices:{},path:[],world:[],ready:function(){this.animation=this.$.animate.$.animation;this.animation.target=this.$.player;this.animation.fill="forwards"},observe:{"position.to":"playerPositionHasChanged",world:"worldHasChanged"},playerPositionHasChanged:function(){var gridBackup=this.grid.clone();this.path=this.finder.findPath(this.position.from[0],this.position.from[1],this.position.to[0],this.position.to[1],this.grid);this.grid=gridBackup;this.position.from=this.position.to},worldHasChanged:function(){this.grid=new PF.Grid(20,20,this.binaryMap);this.finder=new PF.AStarFinder({heuristic:PF.Heuristic.chebyshev})}});</script>

</polymer-element><game-stage></game-stage><script src="build/js/game.js"></script></body>
</html>